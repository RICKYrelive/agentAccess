# Proposal: enhance-gateway-tool-selection

## Summary

增强 MCP 网关创建/编辑对话框中的工具选择功能，添加搜索过滤和负载均衡组配置，使工具管理更便捷、网关更可靠。

## Motivation

当前网关对话框中的"关联 MCP 工具"部分过于简陋：
- 只能通过滚动查看所有工具，没有搜索功能
- 没有过滤功能（按类型、状态等）
- 无法配置负载均衡组
- 当工具数量增多时，选择和管理变得困难

用户需要：
1. 快速搜索和筛选工具
2. 将多个同功能工具配置为负载均衡组，提高可用性
3. 更直观的工具选择和管理界面

## Proposed Solution

### 1. MCP 工具搜索和过滤

#### 搜索框
- 实时搜索工具名称和描述
- 支持模糊匹配
- 搜索结果高亮显示

#### 过滤选项
- **按类型过滤**：内置/自定义/npx/uvx
- **按状态过滤**：已启用/已禁用
- **按类别过滤**：utility/development/search/database 等

#### 统计显示
- 显示每个过滤条件下的工具数量
- 显示已选工具数量

### 2. 负载均衡组配置

#### 负载均衡组概念
- 将多个功能相同或相似的 MCP 工具组成一个组
- 网关调用时自动选择组内工具进行负载均衡
- 提高服务可用性和性能

#### 配置方式
- **创建组**：在工具选择区域，提供"创建负载均衡组"按钮
- **添加工具到组**：从可用工具列表中选择工具添加到组
- **组内配置**：
  - 组名称（如：翻译服务组、代码分析组）
  - 负载均衡策略（轮询/随机/最少调用）
  - 健康检查配置（可选）

#### 显示方式
- 负载均衡组以卡片形式展示
- 显示组内工具数量和状态
- 支持展开/折叠查看组内工具
- 支持编辑组和删除组

### 3. 工具选择界面优化

#### 双栏布局
- **左侧栏**：可用工具列表（带搜索和过滤）
- **右侧栏**：已选工具和负载均衡组

#### 工具卡片
- 显示工具图标、名称、类型
- 显示工具状态（已启用/已禁用）
- 添加/移除按钮

#### 拖拽支持
- 支持拖拽工具到负载均衡组
- 支持调整负载均衡组内工具顺序

## Scope

### In Scope
- 工具搜索和过滤功能
- 负载均衡组的创建、编辑、删除
- 负载均衡组的展示和管理
- 工具选择界面优化
- 更新数据模型以支持负载均衡组

### Out of Scope
- 实际的负载均衡逻辑实现（仅配置界面）
- 实时健康检查（仅配置项）
- 负载均衡策略的实际执行（仅配置保存）

## Dependencies

- 现有 MCP Management Store
- 现有 CreateGatewayDialog 组件
- 现有 MCP 工具类型定义

## Impact on Existing Specifications

### MODIFIED Specifications
- `mcp-gateway-management`: 更新网关创建/编辑相关需求
- `frontend`: 更新组件和交互模式

### ADDED Capabilities
- `load-balancer-group`: 负载均衡组配置管理

## Success Criteria

1. 用户可以在网关对话框中搜索工具
2. 用户可以按类型、状态、类别过滤工具
3. 用户可以创建负载均衡组
4. 用户可以向负载均衡组添加/移除工具
5. 用户可以配置负载均衡策略
6. 负载均衡组可以正确保存和显示
7. 界面响应式设计，与现有 UI 风格一致
